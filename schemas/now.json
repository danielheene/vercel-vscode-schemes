{
  "title": "JSON schema for now.json configuration files",
  "type": "object",
  "properties": {
    "version": {
      "type": "number",
      "default": 2,
      "enum": [1, 2],
      "description": "Specifies the Now Platform version the deployment should use and is known to work with. We strongly recommend setting a `version` when working on production systems or using source control (e.g. Git)."
    },
    "name": {
      "type": "string",
      "default": "zeit-chat",
      "maxLength": 52,
      "description": "The prefix for all new deployment instances. The CLI usually generates this field automatically based on the name of the directory. But if you'd like to define it explicitly, this is the way to go."
    },
    "alias": {
      "description": "domain names (optionally including subdomains) added to the account, or a string for a suffxed URL using `.now.sh` or a Custom Deployment Suffix.\n\nThe alias or aliases are applied automatically using Now for GitHub or Now for GitLab when merging or pushing to the default branch.\n\nYou can deploy to the defined aliases using Now CLI by setting the production deployment environment target.",
      "type": ["array", "string"],
      "default": "name.now.sh",
      "items": {
        "type": "string"
      }
    },
    "scope": {
      "type": "string",
      "description": "This property determines the scope (user or team) under which the project will be deployed by Now CLI or Now Desktop.\n\nFor teams, either an ID or slug. For users, either a email address, username, or ID.\n\nFurthermore, it also affects any other actions that the user takes within the directory that contains this configuration (e.g. listing secrets using `now secrets ls`)."
    },
    "env": {
      "type": "object",
      "description": "Environment keys and values.\n\nEnvironment variables passed to the invoked `Lambdas`.",
      "properties": {
        "ENV_NAME": {
          "type": "string"
        }
      },
      "additionalProperties": {
        "type": "string"
      }
    },
    "build": {
      "type": "object",
      "properties": {
        "env": {
          "description": "Environment keys and values.\n\nEnvironment variables passed to the `Build processes`.",
          "$ref": "#/properties/env"
        }
      }
    },
    "builds": {
      "description": "Builds are a step of deployments that transform sources into production ready outputs. Builds result in either Static Files, or Lambdas (which execute code and serve a dynamic response for every request).",
      "type": "array",
      "properties": {
        "src": {
          "description": "A glob expression or pathname. If more than one file is resolved, one build will be created per matched file. It can include `*` and `**`.",
          "type": "string"
        },
        "use": {
          "type": "string",
          "description": "A npm module to be installed by the build process. It can include a semver compatible version (e.g.: `@org/proj@1`).",
          "default": "@now/static",
          "oneOf": [
            {
              "type": "string"
            },
            {
              "enum": [
                "@now/static",
                "@now/static-build",
                "@now/node",
                "@now/node-server",
                "@now/next",
                "@now/go",
                "@now/php",
                "@now/python",
                "@now/rust",
                "@now/bash",
                "@now/mdx-deck",
                "@now/optipng",
                "@now/html-minifier",
                "@now/md"
              ]
            }
          ]
        },
        "config": {
          "description": "Optionally, an object including arbitrary metadata to be passed to the Builder.",
          "type": "object",
          "properties": {
            "includeFiles": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "maxLambdaSize": {
              "type": "string"
            }
          }
        }
      }
    },
    "routes": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "status": {
            "type": "number",
            "description": "The status property defines the status code that Now should respond with when a path is requested."
          },
          "src": {
            "description": "String supporting PCRE Regex and Route Parameters like `/product/(?<id>[^/]+).`\n\nFor each route, `src` is required to set the path which the behavior will affect.",
            "type": "string"
          },
          "dest": {
            "description": "`dest` is used to rewrite the `src` path to another path, such as another URL or Now hosted lambda.",
            "type": "string"
          },
          "methods": {
            "type": "array",
            "description": "The methods property can be used to define what HTTP request methods a particular path accepts.\n\nThe value of this property can be any HTTP request method, with the default being that the path can accept any method.",
            "items": {
              "type": "string",
              "oneOf": [
                {
                  "type": "string"
                },
                {
                  "enum": ["GET", "POST", "PATCH", "PUT", "DELETE"]
                }
              ]
            }
          },
          "headers": {
            "type": "object",
            "description": "The headers property is an object supporting HTTP headers as the keys, with the intended value as the key's value.",
            "properties": {
              "host": {
                "description": "This header represents the domain name as it was accessed by the client. If the deployment has been aliased and the client visited the alias URL, it contains the alias instead of the underlying deployment URL.",
                "type": "string",
                "default": ""
              },
              "cache-control": {
                "type": "string",
                "default": "s-maxage=604800"
              }
            }
          }
        }
      }
    },
    "regions": {
      "description": "By setting and modifying this value, you can decide the deployment regions of the Lambdas that get created as a result of the build steps.\n\nThis value does not impact static files or edge caches, since deployments always have a CDN layer in front.\n\nThe special value all can be used to target all available regions.",
      "type": "array",
      "items": {
        "description": "The special value all can be used to target all available regions.\n\nNOTE: The values in regions support targeting a region generically, by omitting the number. If `sfo` is specified, our backend will select a singular region (like `sfo1`) at deploy time.",
        "type": "string",
        "default": "all",
        "oneOf": [
          {
            "type": "string"
          },
          {
            "enum": [
              "all",
              "arn",
              "bom",
              "bru",
              "cdg",
              "chs",
              "cle",
              "dub",
              "gru",
              "hel",
              "hkg",
              "hnd",
              "iad",
              "icn",
              "lax",
              "lhr",
              "oma",
              "pdx",
              "sfo",
              "sin",
              "syd",
              "tpe",
              "yul",
              "zrh"
            ]
          }
        ]
      }
    },
    "public": {
      "description": "When set to `true`, both the source view and logs view will be publicly accessible (without authentication with ZEIT).",
      "type": "boolean"
    },
    "github": {
      "type": "object",
      "properties": {
        "enabled": {
          "description": "When set to `false`, Now for GitHub will not deploy the given project regardless of the GitHub app being installed.",
          "default": true,
          "type": "boolean"
        },
        "autoAlias": {
          "description": "When set to `false`, Now for GitHub will not apply the alias upon merge.",
          "default": true,
          "type": "boolean"
        },
        "silent": {
          "description": "When set to `true`, Now for GitHub will stop commenting on pull requests and commits.",
          "default": false,
          "type": "boolean"
        },
        "autoJobCancelation": {
          "description": "When set to false, Now for GitHub will always build pushes in sequence without cancelling a build for the most recent commit.",
          "default": true,
          "type": "boolean"
        }
      }
    }
  }
}
